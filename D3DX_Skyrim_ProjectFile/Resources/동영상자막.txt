엘더스크롤 스카이림 리소스를 활용하여 온라인MMORPG를 구현하였습니다.

리소스 추출)
엘더스크롤 전용파일(.nif)을 3dsmax로 불러들여 xfile/obj 파일로 추출 한 후 데이터 파싱을 하였습니다.
애니메이션 데이터의 경우 nif 파일을 하복엔진 표준 hkx 파일로 변환 후 3dsmax상에서 스킨드 매시에 애니매이션을 적용하였으며, 
nif 플러그인에 연결된 리소스는 따로 3dsmax 상에서 Attach 후 bone weight 를 적용시키는 작업을 수행하여 리소스의 퀄리티 향상시켰습니다.

네트워크)
다중접속이 가능하도록 멀티스레드를 이용한 네트워크 서버를 구축하였습니다.
쓰레드 동기화를 통해 모든 클라인트에게 동기화된 몬스터의 정보를 전달할 수 있게 하였습니다.
서버에서 관리되는 클라이언트 정보는 STL 맵 컨테이너로 관리되며,
서버로 전송되는 패킷은 STL 큐를 메시지 버퍼로 활용하여 처리하였습니다.

플레이어)
케릭터 본 애니메이션 계층구조에 기반한 무기교체를 구현하였습니다.
8방향 플레이어모션에 대한 컨트롤을 구현하였습니다.
케릭터 충돌박스 구현
플레이어를 따라다니는 카메라를 구현하였습니다.

지형오브젝트)
3dsmax 상에서 레벨디자인을 한 후 지형에 활용되는 오브젝트에 대한 월드 정보를 맵배치데이터로 작성하고,
맵배치데이터를 파싱하는 과정 중에 Obj 파싱을 수행합니다.

최적화 기법으로는 옥트리를 이용하여 3차원 공간을 분할하였고, 분할된 공간에 속한 오브젝트에 대해 프러스텀 컬링을 구현하였습니다.
분할된 공간에 속한 오브젝트는 지형에 활용되는 오브젝트이며
컬링 된 오브젝트는 출력뿐만 아니라 플레이어와의 충돌 대상에도 활용됩니다.

프러스텀을 움직이지 않고 컬링을 적용한 화면(캡쳐완료)
프러스텀을 움직이지 않고 컬링을 적용하지 않은 화면(캡쳐완료)

꽃이나 풀의 경우는 알파테스팅으로 반투명 처리를 연출하였습니다.

바닥지형)
바닥의 지형은 타일기반으로 구성하였으며, HeightMap을 이용하여 자연스러운 지형의 높낮이를 표현하였습니다.
지형위의 오브젝트/플레이어/몬스터의 높이값은 타일을 구성하는 삼각형에 대해 HeightPicking 기법을 적용하였습니다.

몬스터AI)
컴포짓 패턴과 상태패턴을 조합하여 몬스터 AI를 구현하였습니다.
AI는 클라이언트와 몬스터의 위치정보와 몬스터의 공격성향 피격여부에 따라 유동적으로 변합니다.

용은 공격적인 AI로 거리가 감지범위안에 들어올경우 반응하여
가장먼저 접근한 클라이언트를 타겟으로설정하여 공격합니다.

일정거리 이하로 접근하여 품안으롤 들어올경우
공격하기 접합한거리롤 물러난후 공격합니다

일정거리이상 도망쳐 시작거리에서 멀어질경우 용은 시작위치로 돌아가며

전투에서 끝난시간을 기준으롤 기준시간이 지나면 체력을 회복하며 회복이끝나고 전투를하지않을경우

대기모드로 전환됍니다.

사망과 부활시 전용 모션이 출력됍니다.

디자인 패턴)
그외 사용된 디자인패턴으로는 싱글턴 패턴이 있으며 이를 활용하여
디바이스, 네트워크매니저, 카메라, 프러스텀, AI, 사운드매니저를 구현하였습니다.

스카이박스)
스카이박스를 이용하여 자연스럽고 아름다운 하늘을 연출하였습니다. 

UI, 인벤토리)
RHW를 이용하여 인벤토리에 3D 오브젝트 디스플레이를 연출하였습니다.
STL map 컨테이너를 활용하여 인벤토리에 활용되는 아이템을 관리하였으며
인벤토리에 디스플레이 된 무기를 클릭하여 무기를 교체할 수 있습니다.


플레이 영상 시 대본)
때리면 데미지가 입혀집니다. 몬스터를 타게팅하면 빨간색 표시가 뜹니다.
인벤에 들어가면 공격력 방어력이 표시됩니다.
몬스터 데미지처리
몬스터 충돌박스 구현, 사운드, 


곰 AI -> 천수형
곰에 필요한 리소스->대원
플레이어 초기위치수정, HP 조정 -> 천수형 
플레이어 타격 사운드 시점 조절-> 천수형
움직이는 로고->명석 (완료) -> 텍스쳐 밝은걸로 수정
파티클, 쉐이더->형석
동영상촬영->주말

몬스터 여러마리에 대해 정보받게 해놨는지 확인

내일할일) 쓰레드 질문.
sgDevice같은건 어떻게 처리해야하는지

크리티컬섹션 왠만하면 사용하지마라.
스레드에서는 랜더하는게 아니므로 로딩프로세스를 다른스레드에서 돌리고 랜더를 메인스레드에서 돌려라.


skin.vsh 랑 또하나 첨부를 해야한다. 쉐어더파일.
멀티애니메이션 적용시키기.

학원가기전 : 파티클공부
수업마치고 동접 테스트
애니메이션 속도 조절






